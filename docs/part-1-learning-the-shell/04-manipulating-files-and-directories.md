# 4. 操作文件和目录

本章将学习以下命令

- `cp` 复制文件和目录（Copy files and directories）
- `mv` 移动或重命名文件和目录（Move/rename files and directories）
- `mkdir` 创建目录（Create directories）
- `rm` 移除文件和目录（Remove files and directories）
- `ln` 创建硬链接和符号链接（Create hard and symbolic links）

以上五个命令是极其常用的 Linux 命令。它们都可以操作文件和目录两者。

现在，坦白地说，这些命令所执行的任务能够在图形界面中更简单地操作。在文件管理器中，我们能拖放一个文件到另外一个目录，剪切粘贴文件，删除文件等等。那为什么还要使用这些命令行程序呢？

答案是强大且灵活。图形界面能处理简单的文件操作，而命令行程序能更简便地执行复杂任务。例如，我们如何能从一个目录中仅仅复制目标文件夹中所没有的或者比目标文件夹更新的 HTML 文件到另一个文件夹？对于一个文件管理器来说，这个任务超级难，但是用命令行却极其简单：

```bash
cp -u *.html destination
```

## 通配符

在使用命令之前，我们需要讨论一下 shell 中能让这些命令变得更强大的一个特性。由于 shell 使用了如此多的文件名，因此提供了特殊字符来帮助我们便捷地指定一组文件名。这些特殊字符，就是<u>通配符</u>（*wildcards*）。使用通配符（也被称作 *globbing*），能让我们基于字符模式（patterns of characters）选择文件名。表 4-1 列出了一些通配符及其效果。

表 4-1：通配符

| 通配符          | 意义                       |
| --------------- | -------------------------- |
| `*`             | 匹配任意字符               |
| `?`             | 匹配任意单个字符           |
| `[characters]`  | 匹配组中任意单个字符       |
| `[!characters]` | 匹配不在组中的任意单个字符 |
| `[[:class:]]`   | 匹配指定字符组中的任意字符 |

表 4-2：常用字符组

| 字符组      | 意义             |
| ----------- | ---------------- |
| `[:alnum:]` | 匹配任意字母数字 |
| `[:alpha:]` | 匹配任意字母     |
| `[:digit:]` | 匹配任意数字     |
| `[:lower:]` | 匹配任意小写字母 |
| `[:upper:]` | 匹配任意大写字母 |

使用通配符，能构建复杂的文件名选择标准。表 4-3 提供了一些字符模式的样例及其所匹配的文件名。

表 4-3：通配符样例

| 样式                     | 所匹配                                       |
| ------------------------ | -------------------------------------------- |
| `*`                      | 所有文件                                     |
| `g*`                     | 以 `g` 开头的任意文件                        |
| `b*.txt`                 | 以 `b` 开头的且以 `.txt` 结尾的任意文件      |
| `Data???`                | 以「Data」开头，且其后跟随三个字符的任意文件 |
| `[abc]*`                 | 以「a」或「b」或「c」开头的任意文件          |
| `BACKUP.[0-9][0-9][0-9]` | 以「BACKUP.」开头且跟随三个数字的任意文件    |
| `[[:upper:]]`            | 以大写字母开头的任意文件                     |
| `[![:digit:]]`           | 不以数字开头的任意文件                       |
| `*[[:lower:]123]`        | 以小写字母或者「1」「2」「3」结尾的文件      |

通配符能用在所有接受以文件名为参数的命令中，我们将在第七章「如 Shell 所见的世界」中详加讨论。

> **字符序列**
>
> 如果之前使用过类 Unix 系统或者读过关于这个主题的书，你可能遇到过 [A-Z] 和 [a-z] 这样的字符序列符号。这些传统的 Unix 符号在老版本的 Linux 中也一样正常工作。它们还能工作，但是你要小心它们不会产生你所希望的结果，除非你做了正确的配置。当前情况下，应该避免使用它们，而代之以表 4-2 所列的字符组。

> **在图形界面中的通配符**
>
> 通配符的特殊用途，不仅在于它能在命令行中频繁使用，而且在一些图形文件管理器中也得到支持。
>
> * 在 Nautilus（GNOME 的文件管理器），你能使用「编辑/选择样式」菜单项来选择文件。仅输入一个文件选择样式，当前目录中符合条件的文件会高亮以供选择。
> * 某些版本的 Dolphin 和 Konqueror（KDE 的文件管理器），能在地址栏中直接输入通配符。例如，你想看所有以「u」开头的在 `/usr/bin` 目录中的文件，在地址栏中输入 `/usr/bin/u*` 即可。
>
> 许多基于命令行的理念也进入到图形界面。这使得 Linux 桌面更加强大。

## mkdir 创建目录

